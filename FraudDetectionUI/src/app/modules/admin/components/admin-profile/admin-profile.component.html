<div class="profile-page">
  <!-- Page Header -->
  <div class="page-header">
    <h1>Administrator Profile</h1>
    <p>Manage your account settings and security preferences</p>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading && !profile">
    <div class="spinner"></div>
    <p>Loading profile...</p>
  </div>

  <!-- Error Alert -->
  <div class="alert alert-danger" *ngIf="error">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
    </svg>
    {{ error }}
    <button class="close-btn" (click)="error = ''">&times;</button>
  </div>

  <!-- Success Alert -->
  <div class="alert alert-success" *ngIf="success">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    {{ success }}
  </div>

  <div class="profile-content" *ngIf="profile">
    <!-- Profile Header Card -->
    <div class="profile-header">
      <div class="avatar-section">
        <div class="avatar">{{ getInitials() }}</div>
        <div class="user-info">
          <h2>{{ profile.firstName }} {{ profile.lastName }}</h2>
          <p class="email">{{ profile.email }}</p>
          <span class="role-badge admin">
            <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944z" clip-rule="evenodd"/>
            </svg>
            Administrator
          </span>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn btn-secondary" (click)="openPasswordModal()">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
          </svg>
          Change Password
        </button>
        <button class="btn btn-primary" *ngIf="!isEditing" (click)="startEditing()">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
          </svg>
          Edit Profile
        </button>
      </div>
    </div>

    <div class="profile-grid">
      <!-- Personal Information -->
      <div class="profile-card">
        <div class="card-header">
          <h3>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
            </svg>
            Personal Information
          </h3>
          <span class="member-since">Member since {{ getMemberSince() }}</span>
        </div>
        <div class="card-body">
          <form *ngIf="!isEditing">
            <div class="info-row">
              <label>First Name</label>
              <span>{{ profile.firstName }}</span>
            </div>
            <div class="info-row">
              <label>Last Name</label>
              <span>{{ profile.lastName }}</span>
            </div>
            <div class="info-row">
              <label>Email Address</label>
              <span>{{ profile.email }}</span>
            </div>
            <div class="info-row">
              <label>Account Type</label>
              <span class="type-admin">Administrator</span>
            </div>
          </form>

          <form *ngIf="isEditing" class="edit-form">
            <div class="form-group">
              <label>First Name</label>
              <input type="text" [(ngModel)]="editForm.firstName" name="firstName">
            </div>
            <div class="form-group">
              <label>Last Name</label>
              <input type="text" [(ngModel)]="editForm.lastName" name="lastName">
            </div>
            <div class="form-group">
              <label>Email Address</label>
              <input type="email" [(ngModel)]="editForm.email" name="email">
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-ghost" (click)="cancelEditing()">Cancel</button>
              <button type="button" class="btn btn-primary" (click)="saveProfile()" [disabled]="loading">
                <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                </svg>
                Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- System Overview -->
      <div class="profile-card">
        <div class="card-header">
          <h3>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
            </svg>
            System Overview
          </h3>
        </div>
        <div class="card-body">
          <div class="stats-grid" *ngIf="systemStats">
            <div class="stat-item">
              <div class="stat-icon users">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ systemStats.totalUsers }}</span>
                <span class="stat-label">Total Users</span>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon transactions">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/>
                  <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ systemStats.totalTransactions }}</span>
                <span class="stat-label">Transactions</span>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon alerts">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ systemStats.totalAlerts }}</span>
                <span class="stat-label">Pending Alerts</span>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon detection">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div class="stat-info">
                <span class="stat-value">{{ systemStats.fraudDetectionRate }}%</span>
                <span class="stat-label">Fraud Rate</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Security Settings -->
      <div class="profile-card">
        <div class="card-header">
          <h3>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944zM11 14a1 1 0 11-2 0 1 1 0 012 0zm0-7a1 1 0 10-2 0v3a1 1 0 102 0V7z" clip-rule="evenodd"/>
            </svg>
            Security Settings
          </h3>
        </div>
        <div class="card-body">
          <div class="security-item">
            <div class="security-info">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
              </svg>
              <div>
                <span class="security-title">Password</span>
                <span class="security-desc">Secure your account with a strong password</span>
              </div>
            </div>
            <button class="btn btn-outline" (click)="openPasswordModal()">Update</button>
          </div>
          <div class="security-item">
            <div class="security-info">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944z" clip-rule="evenodd"/>
              </svg>
              <div>
                <span class="security-title">Admin Access</span>
                <span class="security-desc">Full system access enabled</span>
              </div>
            </div>
            <span class="status-badge success">Active</span>
          </div>
          <div class="security-item">
            <div class="security-info">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
              </svg>
              <div>
                <span class="security-title">System Notifications</span>
                <span class="security-desc">Receive alerts for critical events</span>
              </div>
            </div>
            <span class="status-badge success">Enabled</span>
          </div>
        </div>
      </div>

      <!-- Admin Permissions -->
      <div class="profile-card">
        <div class="card-header">
          <h3>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Permissions
          </h3>
        </div>
        <div class="card-body">
          <div class="permissions-list">
            <div class="permission-item">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="check-icon">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>User Management</span>
            </div>
            <div class="permission-item">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="check-icon">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>Transaction Monitoring</span>
            </div>
            <div class="permission-item">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="check-icon">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>Fraud Alert Management</span>
            </div>
            <div class="permission-item">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="check-icon">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>System Statistics Access</span>
            </div>
            <div class="permission-item">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="check-icon">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>Report Generation</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Change Password Modal -->
<div class="modal-overlay" *ngIf="showPasswordModal" (click)="closePasswordModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
        </svg>
        Change Password
      </h2>
      <button class="close-btn" (click)="closePasswordModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="alert alert-danger" *ngIf="passwordError">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
        </svg>
        {{ passwordError }}
      </div>
      <div class="form-group">
        <label>Current Password</label>
        <input type="password" [(ngModel)]="passwordForm.currentPassword" placeholder="Enter current password">
      </div>
      <div class="form-group">
        <label>New Password</label>
        <input type="password" [(ngModel)]="passwordForm.newPassword" placeholder="Enter new password">
      </div>
      <div class="form-group">
        <label>Confirm Password</label>
        <input type="password" [(ngModel)]="passwordForm.confirmPassword" placeholder="Confirm new password">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" (click)="closePasswordModal()">Cancel</button>
      <button class="btn btn-primary" (click)="changePassword()" [disabled]="loading">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
          <path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
        </svg>
        Update Password
      </button>
    </div>
  </div>
</div>
